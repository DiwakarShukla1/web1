"use strict";angular.module("webApp",["ngCookies","ngResource","ngSanitize","ngRoute","ngAnimate","akoenig.deckgrid"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/profile",{templateUrl:"views/profile.html",controller:"ProfileCtrl"}).when("/products",{templateUrl:"views/products.html",controller:"ProductsCtrl"}).when("/recommendation",{templateUrl:"views/recommendation.html",controller:"RecommendationCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("webApp").controller("MainCtrl",["$scope",function(){$(".full-bg").css("height",$(window).height()),$(window).resize(function(){$(".full-bg").css("height",$(window).height())}),$(".full-bg").backstretch(["images/onion.jpg","images/innovation.jpg","images/profile.jpg"],{duration:5e3}),$(".rotate").each(function(){var a=0,b=$(this),c=$(this).html().split(",");b.html(c[0]),setInterval(function(){b.animate({textShadowBlur:20,opacity:0},500,function(){a=$.inArray(b.html(),c),a+1==c.length&&(a=-1),b.text(c[a+1]).animate({textShadowBlur:0,opacity:1},500)})},5e3)});$("#Container").mixItUp({animation:{duration:190,effects:"fade translateZ(-360px) stagger(34ms)",easing:"ease"}});var a="list";$(window).width()>1023&&($("#Container").removeClass("list").addClass("grid"),a="grid"),$(window).resize(function(){$(window).width()<1024&&"grid"===a?($("#Container").removeClass("grid").addClass("list"),a="list"):$(window).width()>1023&&"list"===a&&($("#Container").removeClass("list").addClass("grid"),a="grid")})}]),angular.module("webApp").controller("ProfileCtrl",["$scope",function(){$(".full-bg").css("height",$(window).height()),$(window).resize(function(){$(".full-bg").css("height",$(window).height())}),$(".full-bg").each(function(){var a=$(this).attr("data-bg");console.log(),$(this).backstretch(a)}),$(".rotate").each(function(){var a=0,b=$(this),c=$(this).html().split(",");b.html(c[0]),setInterval(function(){b.animate({textShadowBlur:20,opacity:0},500,function(){a=$.inArray(b.html(),c),a+1==c.length&&(a=-1),b.text(c[a+1]).animate({textShadowBlur:0,opacity:1},500)})},2500)}),$("nav#main").affix({offset:{top:function(){return $(window).height()-150}}});var a=120;$("section").waypoint(function(b){var c=$(this).attr("id");$("nav#main a").removeClass("active"),"up"==b&&(c=$(this).prev("section").attr("id")),a=0,"down"==b&&(a=50),void 0!=c?$("nav#main a."+c).addClass("active"):$("nav#main a.home").addClass("active")},{offset:a})}]),angular.module("webApp").directive("imageloaded",[function(){return{restrict:"A",link:function(a,b,c){var d=c.loadedclass;b.bind("load",function(){angular.element(b).addClass(d)})}}}]),angular.module("webApp").controller("ProductsCtrl",["$scope","$http",function(a,b){$.CatSlider=function(a,b){this.$el=$(b),this._init(a)},$.CatSlider.prototype={_init:function(){this.$categories=this.$el.children("ul"),this.$navcategories=this.$el.find("nav > a");var a={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"};this.animEndEventName=a[Modernizr.prefixed("animation")],this.support=Modernizr.csstransforms&&Modernizr.cssanimations,this.isAnimating=!1,this.current=0;var b=this.$categories.eq(0);this.support?b.addClass("mi-current"):(this.$categories.hide(),b.show()),this.$navcategories.eq(0).addClass("mi-selected"),this._initEvents()},_initEvents:function(){var a=this;this.$navcategories.on("click.catslider",function(){return a.showCategory($(this).index()),!1}),$(window).on("resize",function(){a.$categories.removeClass().eq(0).addClass("mi-current"),a.$navcategories.eq(a.current).removeClass("mi-selected").end().eq(0).addClass("mi-selected"),a.current=0})},showCategory:function(a){if(a===this.current||this.isAnimating)return!1;this.isAnimating=!0,this.$navcategories.eq(this.current).removeClass("mi-selected").end().eq(a).addClass("mi-selected");var b=a>this.current?"right":"left",c="right"===b?"mi-moveToLeft":"mi-moveToRight",d="right"===b?"mi-moveFromRight":"mi-moveFromLeft",e=this.$categories.eq(this.current),f=this.$categories.eq(a),g=f.children(),h="right"===b?g.length-1:0,i=this;this.support?(e.removeClass().addClass(c),setTimeout(function(){f.removeClass().addClass(d),g.eq(h).on(i.animEndEventName,function(){$(this).off(i.animEndEventName),f.addClass("mi-current"),i.current=a;var b=$(this);i.forceRedraw(b.get(0)),i.isAnimating=!1})},90*g.length)):(e.hide(),f.show(),this.current=a,this.isAnimating=!1)},forceRedraw:function(a){if(a){var b=document.createTextNode(" "),c=a.style.position;a.appendChild(b),a.style.position="relative",setTimeout(function(){a.style.position=c,b.parentNode.removeChild(b)},25)}}},$.fn.catslider=function(a){var b=$.data(this,"catslider");if("string"==typeof a){var c=Array.prototype.slice.call(arguments,1);this.each(function(){b[a].apply(b,c)})}else this.each(function(){b?b._init():b=$.data(this,"catslider",new $.CatSlider(a,this))});return b},$("#mi-slider").catslider(),a.awesome=function(c){b.get("data/"+c+".json").success(function(b){a.result=b,a.product=b[b.length-1]}).error(function(){})},a.awesome("sa"),a.productSelect=function(b){a.product=a.result[b],alert(JSON.stringify(a.product))};new cbpHorizontalSlideOutMenu(document.getElementById("cbp-hsmenu-wrapper"))}]),angular.module("webApp").controller("RecommendationCtrl",["$scope","$http",function(a,b){function c(){d(),f(),p.addEventListener("click",function(a){a.preventDefault(),g("next")}),q.addEventListener("click",function(a){a.preventDefault(),g("prev")})}function d(){o.style.display="none"}function e(){o.style.display="block"}function f(){k.className=k.className.replace(/\bfx.*?\b/g,"");var a=s[Math.floor(Math.random()*s.length)];classie.addClass(k,a),e()}function g(c){if(r)return!1;r=!0;var d=0,e=l[m];b.get("data/"+$(e).data("types")+".json").success(function(b){a.result=b,a.product=b[b.length-1],console.log(a.product)}).error(function(){alert("error")}),"next"===c?m=n-1>m?m+1:0:"prev"===c&&(m=m>0?m-1:n-1);var f=l[m],g=function(){this.removeEventListener(j,g),classie.removeClass(this,"current"),classie.removeClass(this,"next"===c?"navOutNext":"navOutPrev"),++d,2===d&&(r=!1)},i=function(){this.removeEventListener(j,i),classie.addClass(this,"current"),classie.removeClass(this,"next"===c?"navInNext":"navInPrev"),++d,2===d&&(r=!1)};h.animations?(e.addEventListener(j,g),f.addEventListener(j,i)):(g(),i()),classie.addClass(e,"next"===c?"navOutNext":"navOutPrev"),classie.addClass(f,"next"===c?"navInNext":"navInPrev")}var h={animations:Modernizr.cssanimations},i={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},j=i[Modernizr.prefixed("animation")],k=(document.getElementById("fxselect"),document.getElementById("component")),l=k.querySelector("ul.itemwrap").children,m=0,n=l.length,o=k.querySelector("nav"),p=o.querySelector(".next"),q=o.querySelector(".prev"),r=!1,s=["fxSoftScale","fxPressAway","fxSideSwing","fxFortuneWheel","fxSwipe","fxPushReveal","fxSnapIn","fxLetMeIn","fxStickIt","fxArchiveMe","fxVGrowth","fxSlideBehind","fxSoftPulse","fxEarthquake","fxCliffDiving"];b.get("data/fa.json").success(function(b){a.result=b,a.product=b[b.length-1],console.log(a.product)}).error(function(){alert("error")}),c()}]),angular.module("webApp").controller("AboutCtrl",["$scope",function(){$(".full-bg").css("height",$(window).height()),$(window).resize(function(){$(".full-bg").css("height",$(window).height())}),$(".full-bg").each(function(){var a=$(this).attr("data-bg");console.log(),$(this).backstretch(a)}),$(".rotate").each(function(){var a=0,b=$(this),c=$(this).html().split(",");b.html(c[0]),setInterval(function(){b.animate({textShadowBlur:20,opacity:0},500,function(){a=$.inArray(b.html(),c),a+1==c.length&&(a=-1),b.text(c[a+1]).animate({textShadowBlur:0,opacity:1},500)})},2500)}),$("nav#main").affix({offset:{top:function(){return $(window).height()-150}}});var a=120;$("section").waypoint(function(b){var c=$(this).attr("id");$("nav#main a").removeClass("active"),"up"==b&&(c=$(this).prev("section").attr("id")),a=0,"down"==b&&(a=50),void 0!=c?$("nav#main a."+c).addClass("active"):$("nav#main a.home").addClass("active")},{offset:a})}]);